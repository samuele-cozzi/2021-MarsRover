title Rover

participant CR api
participant CR Command Handlers
participant CR EventSubscriber
participant CR Aggregates
participant CR Database

participant CR Events
participant R Events

participant R Aggregates
participant R Event Subscriber
participant R Command Handlers

CR api -> CR Command Handlers: Start (moves, stop?)
CR Command Handlers -> CR Aggregates: Start.Move (moves, stop?)
CR Aggregates -> CR Database : Start (moves,stop?)
CR Aggregates -> R Events : Start (moves,stop?)
R Event Subscriber -> R Events: Handle async (moves, stop?)
loop moves
    R Event Subscriber -> R Command Handlers: Move
    R Command Handlers -> R Aggregates: Move
    R Event Subscriber -> R Command Handlers: Turn
    R Command Handlers -> R Aggregates: Turn
end
R Event Subscriber -> R Command Handlers: Stop
R Command Handlers -> R Aggregates: Stop
R Aggregates -> CR Events: Stop
CR EventSubscriber -> CR Events:Handle async
CR EventSubscriber -> CR Command Handlers: Position
CR Command Handlers -> CR Aggregates: Position
CR Aggregates -> CR Database: Position

CR api -> CR Database: get position
